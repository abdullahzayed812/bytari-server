# 🐾 واجهة برمجة التطبيقات البيطرية

**اللغة**: [English](README.md) | [العربية](#arabic)

---

## 📋 وصف المشروع

هذا هو خادم واجهة برمجة التطبيقات الخلفية لتطبيق **بيطري**. يوفر واجهة برمجة تطبيقات REST كاملة مبنية بتقنيات حديثة لإدارة الخدمات البيطرية وسجلات الحيوانات الأليفة والمواعيد والاستشارات ووظائف التجارة الإلكترونية.

## 🛠️ التقنيات المستخدمة

- **بيئة التشغيل**: Bun (بيئة تشغيل JavaScript عالية الأداء)
- **إطار العمل**: Hono + tRPC (واجهات برمجة تطبيقات آمنة الأنواع)
- **قاعدة البيانات**: PostgreSQL مع Drizzle ORM
- **المصادقة**: مصادقة مبنية على JWT
- **التحقق**: مخططات Zod للتحقق الآمن من الأنواع

## 📊 الميزات

- **🏥 إدارة العيادات** - التسجيل، الملفات الشخصية، الخدمات
- **👨‍⚕️ خدمات الأطباء البيطريين** - الملفات المهنية، التخصصات
- **🐕 سجلات الحيوانات** - التاريخ الطبي الكامل، التطعيمات
- **📅 المواعيد** - نظام الحجز والجدولة
- **💬 الاستشارات** - استشارات بيطرية في الوقت الفعلي
- **🛒 التجارة الإلكترونية** - مبيعات مستلزمات الحيوانات والأدوية
- **🏪 متاجر متعددة البائعين** - سوق لمنتجات الحيوانات الأليفة
- **📦 إدارة المستودعات** - تتبع المخزون
- **🤖 تكامل الذكاء الاصطناعي** - ردود الاستشارة الآلية
- **👑 لوحة تحكم الإدارة** - إدارة النظام الكاملة
- **📱 الإشعارات الفورية** - الإشعارات والرسائل

## 🚀 البدء السريع

### المتطلبات الأساسية
```bash
# البرامج المطلوبة
- Bun أو Node.js 18+
- PostgreSQL 14+
- Git
```

### التثبيت
```bash
# 1. نسخ المستودع
git clone <رابط-مستودع-الخادم>
cd backend

# 2. تثبيت التبعيات
bun install
# أو: npm install

# 3. إعداد متغيرات البيئة
cp env.example .env
# تحرير .env ببيانات قاعدة البيانات

# 4. إعداد قاعدة البيانات
bun run db:generate
bun run db:migrate

# 5. تعبئة قاعدة البيانات (اختياري)
bun run db:seed

# 6. تشغيل خادم التطوير
bun run dev
```

### متغيرات البيئة
```bash
# مطلوب
DATABASE_URL=postgresql://username:password@localhost:5432/veterinary_app
PORT=3001
NODE_ENV=development

# اختياري
JWT_SECRET=المفتاح-السري-الخاص-بك
OPENAI_API_KEY=مفتاح-openai-الخاص-بك
```

## 🔄 الأوامر المتاحة

```bash
bun run dev          # تشغيل خادم التطوير مع إعادة التحميل التلقائي
bun run start        # تشغيل خادم الإنتاج
bun run build        # بناء للإنتاج
bun run db:generate  # إنشاء هجرات قاعدة البيانات
bun run db:migrate   # تشغيل هجرات قاعدة البيانات
bun run db:studio    # فتح Drizzle Studio (واجهة قاعدة البيانات المرئية)
bun run db:seed      # تعبئة قاعدة البيانات بالبيانات الأولية
```

## 🌐 نقاط النهاية لواجهة برمجة التطبيقات

- **فحص الصحة**: `GET /health`
- **واجهة tRPC**: جميع النقاط متاحة في `/trpc/*`
- **التوثيق**: متاح عند تشغيل الخادم

### مسارات واجهة برمجة التطبيقات الرئيسية:
- **المستخدمون والمصادقة** - إدارة المستخدمين، تسجيل الدخول، الأدوار
- **الحيوانات الأليفة** - تسجيل الحيوانات، السجلات الطبية، الموافقات
- **العيادات** - إدارة العيادات، الخدمات، الجداول
- **المواعيد** - الحجز، الجدولة، الإدارة
- **الاستشارات** - استشارات بيطرية في الوقت الفعلي
- **التجارة الإلكترونية** - المنتجات، الطلبات، المخزون
- **الإدارة** - إدارة النظام، التحليلات، الموافقات

## 🚀 النشر للإنتاج

### استخدام Railway (مُوصى به)
1. ربط مستودع GitHub الخاص بك بـ Railway
2. تعيين متغيرات البيئة في لوحة تحكم Railway  
3. النشر التلقائي عند الدفع إلى الفرع الرئيسي

### استخدام Render
1. ربط المستودع بـ Render
2. تعيين متغيرات البيئة
3. اختيار إضافة PostgreSQL
4. النشر

### النشر اليدوي
```bash
# تعيين متغيرات بيئة الإنتاج
export DATABASE_URL="postgresql://..."
export NODE_ENV=production
export PORT=3001

# البناء والتشغيل
bun run build
bun run start
```

## 🗄️ مخطط قاعدة البيانات

تتضمن قاعدة البيانات أكثر من 30 جدول:
- المستخدمون، الحيوانات الأليفة، الأطباء البيطريون، العيادات
- المواعيد، الاستشارات، الاستفسارات
- المنتجات، الطلبات، المتاجر، المستودعات  
- الإشعارات، الرسائل، الموافقات
- إعدادات الذكاء الاصطناعي، تعيينات المجال

## 🔧 التطوير

```bash
# التشغيل في وضع التطوير
bun run dev

# عمليات قاعدة البيانات
bun run db:studio    # محرر قاعدة البيانات المرئي
bun run db:generate  # إنشاء هجرة جديدة
bun run db:migrate   # تطبيق الهجرات

# ستكون واجهة برمجة التطبيقات متاحة في:
# http://localhost:3001
```

## 🛡️ ميزات الأمان

- مصادقة قائمة على JWT
- التحكم في الوصول القائم على الأدوار (RBAC)
- التحقق من المدخلات باستخدام مخططات Zod
- تكوين CORS
- تحديد المعدل جاهز
- تكوين قائم على البيئة

## 📞 الدعم

للدعم التقني، يرجى الاتصال بفريق التطوير.

---

**🚀 خادم الواجهة الخلفية جاهز للإنتاج!**


